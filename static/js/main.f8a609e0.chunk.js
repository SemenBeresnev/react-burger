(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{109:function(e,t,n){e.exports={item:"burger-constructor-item_item__2i1_7"}},110:function(e,t,n){e.exports={profile__orders:"profile-orders_profile__orders__15QWL"}},111:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__3mbJe"}},120:function(e,t,n){},13:function(e,t,n){e.exports={feeds__container:"feed_feeds__container__3p_Zb",feeds:"feed_feeds__14gW4",ingredients:"feed_ingredients__ezg5S",ingredient:"feed_ingredient__A5jtd",feed:"feed_feed__2WUb3",feed__top:"feed_feed__top__2WwWa",feed__bottom:"feed_feed__bottom__3p01i",feed__info:"feed_feed__info__1a3RJ",feed__board:"feed_feed__board__2MiYx",feed__boardLeft:"feed_feed__boardLeft__2T64x",feed__boardRight:"feed_feed__boardRight__146VF",feed__completed:"feed_feed__completed__25Jw-",feed__inProgress:"feed_feed__inProgress__23NGt",feed__mainTitle:"feed_feed__mainTitle__1tm_V",more:"feed_more__zKuq5"}},16:function(e,t,n){e.exports={constructor:"burger-constructor_constructor__3obDF",list:"burger-constructor_list__1C9SA",item:"burger-constructor_item__S9iYJ",list_scroll:"burger-constructor_list_scroll__3rsie burger-constructor_list__1C9SA",order:"burger-constructor_order__16Uwk",total_amount:"burger-constructor_total_amount__3eEuX",nobun:"burger-constructor_nobun__2GfBo",nobun_top:"burger-constructor_nobun_top__3m2ro burger-constructor_nobun__2GfBo",nobun_bottom:"burger-constructor_nobun_bottom__1SBSN burger-constructor_nobun__2GfBo",item_isHovering:"burger-constructor_item_isHovering__3il4z"}},17:function(e,t,n){e.exports={"body--container":"app-header_body--container__1Rea5",appbar:"app-header_appbar__1AJUG",container__button:"app-header_container__button__1mqBU",title__button:"app-header_title__button__2tmHI",icons:"app-header_icons__3CFCP",container__buttons:"app-header_container__buttons__1h3vS",nav:"app-header_nav___XYFe",nav__menu:"app-header_nav__menu__3oPM5",nav__item:"app-header_nav__item__2-P7B",nav__link:"app-header_nav__link__6ajx1",nav__linkActive:"app-header_nav__linkActive__3ALdQ",profile:"app-header_profile__3yz-4"}},198:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(41),i=n.n(a),s=(n(120),n(11)),o=n(6),l=n(37),d=function(){return Object(l.b)()},u=l.c,_=n(4),j=n(17),m=n.n(j),b=n(0);var p=function(){var e=u((function(e){return e.userData})).isAuth,t=!!Object(s.j)({path:"/",exact:!0}),n=!!Object(s.j)("/feed"),c=!!Object(s.j)("/profile"),r=!!Object(s.j)("/login"),a=!!Object(s.j)({path:"/ingredients/:id"});return Object(b.jsx)("div",{className:m.a.body__container,children:Object(b.jsxs)("div",{className:m.a.appbar,children:[Object(b.jsxs)("div",{className:m.a.container__buttons,children:[Object(b.jsx)("div",{className:m.a.container__button,children:Object(b.jsxs)(o.c,{exact:!0,to:"/",activeClassName:m.a.nav__linkActive,className:"".concat(m.a.nav__link," ").concat(a&&m.a.nav__linkActive," text text_type_main-default"),children:[Object(b.jsx)(_.BurgerIcon,{type:t||a?"primary":"secondary"}),Object(b.jsx)("p",{children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(b.jsx)("div",{className:m.a.container__button,children:Object(b.jsxs)(o.c,{to:"/feed",activeClassName:m.a.nav__linkActive,className:"".concat(m.a.nav__link," text text_type_main-default"),children:[Object(b.jsx)(_.ListIcon,{type:n?"primary":"secondary"}),Object(b.jsx)("p",{children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]}),Object(b.jsx)(o.b,{to:"/",children:Object(b.jsx)(_.Logo,{})}),Object(b.jsx)("div",{className:m.a.container__button,children:e?Object(b.jsxs)(o.c,{to:"/profile",activeClassName:m.a.nav__linkActive,className:"".concat(m.a.profile," text text_type_main-default pl-4 pr-4 pt-2 pb-2"),children:[Object(b.jsx)(_.ProfileIcon,{type:c?"primary":"secondary"}),Object(b.jsx)("span",{children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442 (\u0443\u0436\u0435 \u0435\u0441\u0442\u044c)"})]}):Object(b.jsxs)(o.c,{to:"/login",activeClassName:m.a.nav__linkActive,className:"".concat(m.a.profile," text text_type_main-default pl-4 pr-4 pt-2 pb-2"),children:[Object(b.jsx)(_.ProfileIcon,{type:r?"primary":"secondary"}),Object(b.jsx)("span",{children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442 (\u0441\u043e\u0437\u0434\u0430\u0442\u044c)"})]})})]})})},f=n(34),x=n.n(f);var O=function(){d();var e=u((function(e){return e.burgerIngredients})),t=e.ingredients,n=e.ingredientDetails,c=Object(s.i)().id,r=t.find((function(e){return e._id===c}));return Object(b.jsxs)(b.Fragment,{children:[function(){for(var e in n)return!1;return!0}()&&Object(b.jsx)("h1",{className:"".concat(x.a.title,"  mt-30 text text_color_primary text_type_main-large"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),r&&Object(b.jsxs)("div",{className:x.a.container,children:[Object(b.jsx)("img",{src:null===r||void 0===r?void 0:r.image_large,alt:""}),Object(b.jsx)("h5",{className:"text text_type_main-medium mt-4",children:null===r||void 0===r?void 0:r.name}),Object(b.jsxs)("div",{className:"".concat(x.a.flex," mt-8"),children:[Object(b.jsxs)("div",{className:"".concat(x.a.item," mr-5"),children:[Object(b.jsx)("span",{className:"text text_color_inactive text_type_main-default",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(b.jsx)("span",{className:"text text_color_inactive text_type_digits-default mt-2",children:null===r||void 0===r?void 0:r.calories})]}),Object(b.jsxs)("div",{className:"".concat(x.a.item," mr-5"),children:[Object(b.jsx)("span",{className:"text text_color_inactive text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(b.jsx)("span",{className:"text text_color_inactive text_type_digits-default mt-2",children:null===r||void 0===r?void 0:r.proteins})]}),Object(b.jsxs)("div",{className:"".concat(x.a.item," mr-5"),children:[Object(b.jsx)("span",{className:"text text_color_inactive text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(b.jsx)("span",{className:"text text_color_inactive text_type_digits-default mt-2",children:null===r||void 0===r?void 0:r.fat})]}),Object(b.jsxs)("div",{className:"".concat(x.a.item," mr-5"),children:[Object(b.jsx)("span",{className:"text text_color_inactive text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(b.jsx)("span",{className:"text text_color_inactive text_type_digits-default mt-2",children:null===r||void 0===r?void 0:r.carbohydrates})]})]})]})]})},h=n(2),g=n(10),v=n(38),y=n.n(v),N=n(49),E=n.n(N),C=n(208),T=function(e){var t,n=u((function(e){return e.burgerConstructor})),c=n.ingredients,r=n.bun,a=e.image,i=e.price,l=e.name,d=e._id,j=e.type,m=c.filter((function(e){return e._id===d})).length,p=Object(s.h)();t="bun"===j&&r&&r._id===d?2:"bun"!==j&&m?m:"";var f=Object(C.a)({type:"ingredients",item:Object(h.a)({},e),collect:function(e){return{opacity:e.isDragging()?.5:1}}}),x=Object(g.a)(f,2),O=x[0].opacity,v=x[1];return Object(b.jsxs)(o.b,{to:{pathname:"/ingredients/".concat(d),state:{background:p}},ref:v,draggable:!0,className:"".concat(E.a.product),style:{opacity:O},id:d,children:[t&&Object(b.jsx)(_.Counter,{count:Number(t)}),Object(b.jsx)("img",{className:"".concat(E.a.image," pr-4 pl-4"),src:a,alt:""}),Object(b.jsxs)("div",{className:"".concat(E.a.price," mt-1 mb-1"),children:[Object(b.jsx)("span",{className:"text text_type_digits-default mr-2",children:i}),Object(b.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)("p",{className:"".concat(E.a.name," text text_type_main-default mt-1 mb-10"),children:l})]})};var k=function(){var e=u((function(e){return e.burgerIngredients})),t=e.ingredients,n=e.ingredientsRequest,a=e.ingredientsError,i=r.a.useState("buns"),s=Object(g.a)(i,2),o=s[0],l=s[1],j=r.a.useState(!1),m=Object(g.a)(j,2),p=(m[0],m[1],Object(c.createRef)()),f=Object(c.createRef)(),x=Object(c.createRef)(),O=(d(),Object(c.createRef)()),v=function(e){l(e)};return Object(b.jsxs)(b.Fragment,{children:[n&&!a&&Object(b.jsx)("h1",{children:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),a&&!n&&Object(b.jsx)("h1",{children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435"}),!a&&!n&&t.length>0&&Object(b.jsxs)("div",{className:y.a.constr,children:[Object(b.jsx)("h1",{className:"text text_type_main-large mt-10",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(b.jsxs)("div",{style:{display:"flex"},className:"mt-5",children:[Object(b.jsx)("a",{href:"#buns",children:Object(b.jsx)(_.Tab,{value:"buns",active:"buns"===o,onClick:v,children:"\u0411\u0443\u043b\u043a\u0430"})}),Object(b.jsx)("a",{href:"#sauces",children:Object(b.jsx)(_.Tab,{value:"sauces",active:"sauces"===o,onClick:v,children:"\u0421\u043e\u0443\u0441\u044b"})}),Object(b.jsx)("a",{href:"#mains",children:Object(b.jsx)(_.Tab,{value:"mains",active:"mains"===o,onClick:v,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})})]}),Object(b.jsx)("div",{className:"".concat(y.a.ingredients," mt-10"),children:Object(b.jsxs)("div",{className:y.a.products,onScroll:function(e){var t,n,c=O.current,r=null===(t=f.current)||void 0===t?void 0:t.getBoundingClientRect(),a=null===(n=x.current)||void 0===n?void 0:n.getBoundingClientRect();null!==c&&r&&a&&(c.offsetTop-r.top<0?l("buns"):c.offsetTop-a.top<0?l("sauces"):l("mains"))},ref:O,children:[Object(b.jsx)("h3",{className:"text text_type_main-medium",ref:p,id:"buns",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)("div",{className:y.a.products__cont,children:t.filter((function(e){return"bun"===e.type})).map((function(e){return Object(c.createElement)(T,Object(h.a)(Object(h.a)({},e),{},{key:e._id}))}))}),Object(b.jsx)("h3",{className:"text text_type_main-medium",ref:f,id:"sauces",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(b.jsx)("div",{className:y.a.products__cont,children:t.filter((function(e){return"sauce"===e.type})).map((function(e){return Object(c.createElement)(T,Object(h.a)(Object(h.a)({},e),{},{key:e._id}))}))}),Object(b.jsx)("h3",{className:"text text_type_main-medium",ref:x,id:"mains",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(b.jsx)("div",{className:y.a.products__cont,children:t.filter((function(e){return"main"===e.type})).map((function(e){return Object(c.createElement)(T,Object(h.a)(Object(h.a)({},e),{},{key:e._id}))}))})]})})]})]})},S=n(42),R=n(16),w=n.n(R),I="ADD_INGREDIENT_TO_CONSTRUCTOR",D="REMOVE_INGREDIENT_FROM_CONSTRUCTOR",A="ADD_BUN_TO_CONSTRUCTOR",F="MOVE_INGREDIENT_IN_CONSTRUCTOR",P="CLEAR_CONSTRUCTOR",B=n(15),G=n.n(B),U=n(30),L="https://norma.nomoreparties.space/api",z="wss://norma.nomoreparties.space/orders",M=n(207),q=n(210);function H(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=(n=Object(h.a)({path:"/"},n)).expires;if("number"==typeof c&&c){var r=new Date;r.setTime(r.getTime()+1e3*c),c=n.expires=r}c&&c instanceof Date&&(n.expires=c.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var i in n){a+="; "+i;var s=n[i];!0!==s&&(a+="="+s)}document.cookie=a}function W(e){J(e,"",{expires:-1})}function Q(e){return e?Object(M.a)(new Date(e),new Date,{locale:q.a}):null}var Y=function(){return fetch("".concat(L,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(Z)},Z=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},V=function(){var e=Object(U.a)(G.a.mark((function e(t){var n,c,r,a,i=arguments;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.prev=1,e.next=4,fetch(t,n);case 4:return c=e.sent,e.next=7,Z(c);case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(1),"jwt expired"!==e.t0.message){e.next=27;break}return e.next=15,Y();case 15:return r=e.sent,localStorage.setItem("refreshToken",r.refreshToken),J("token",r.accessToken),n.headers.authorization=r.accessToken,e.next=21,fetch(t,n);case 21:return a=e.sent,e.next=24,Z(a);case 24:return e.abrupt("return",e.sent);case 27:return e.abrupt("return",Promise.reject(e.t0));case 28:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(U.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=H("token")){e.next=3;break}return e.abrupt("return",{user:null});case 3:return e.next=5,V("".concat(L,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",authorization:n},body:JSON.stringify(t)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(U.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=H("token")){e.next=3;break}return e.abrupt("return",{user:null});case 3:return e.next=5,V("".concat(L,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",authorization:t}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(U.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=H("token")){e.next=3;break}return e.abrupt("return",{user:null});case 3:return e.next=5,V("".concat(L,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",authorization:n},body:JSON.stringify({ingredients:t})});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee="ORDER_WS_CONNECTION_SUCCESS",te="ORDER_WS_CONNECTION_ERROR",ne="ORDER_WS_CONNECTION_CLOSED",ce="ORDER_WS_GET_MESSAGE",re="ORDER_WS_CONNECTION_START",ae="GET_ORDER_REQUEST",ie="GET_ORDER_SUCCESS",se="GET_ORDER_FAILED",oe="GET_ORDER_NUMBER_REQUEST",le="GET_ORDER_NUMBER_SUCCESS",de="GET_ORDER_NUMBER_FAILED",ue="CLEAR_ORDER_NUMBER",_e="CLEAR_ORDER",je=function(e){return{type:re,payload:e}},me=function(){return{type:ne}},be=n(209),pe=n(211),fe=n(109),xe=n.n(fe),Oe=function(e){var t=e._id,n=e.name,r=e.price,a=e.image,i=e.uuid,s=e.index,o=Object(l.b)(),d=Object(c.useRef)(null),u=Object(C.a)({type:"sortable",item:function(){return Object(h.a)(Object(h.a)({},e),{},{index:s})},collect:function(e){return{isDragging:e.isDragging()}}}),j=Object(g.a)(u,2),m=j[0].isDragging,p=j[1],f=m?0:1,x=Object(be.a)({accept:"sortable",hover:function(e,t){var n;if(d.current){var c=e.index,r=s;if(c!==r){var a=null===(n=d.current)||void 0===n?void 0:n.getBoundingClientRect(),i=(a.bottom-a.top)/2,l=t.getClientOffset().y-a.top;c<r&&l<i||c>r&&l>i||(!function(e,t){o({type:F,dragIndex:e,hoverIndex:t})}(c,r),e.index=r)}}}});return p((0,Object(g.a)(x,2)[1])(d)),Object(b.jsxs)("li",{id:t,style:{opacity:f},className:xe.a.item,ref:d,children:[Object(b.jsx)("div",{className:"mr-2",style:{cursor:"pointer"},children:Object(b.jsx)(_.DragIcon,{type:"primary"})}),Object(b.jsx)(_.ConstructorElement,{text:n,price:r,thumbnail:a,handleClose:function(){o({type:D,id:i})}})]})};var he=function(){var e=u((function(e){return{ingredients:e.burgerConstructor.ingredients,bun:e.burgerConstructor.bun,orderNumber:e.orderData.orderNumber,isAuth:e.userData.isAuth}})),t=e.ingredients,n=e.bun,a=e.orderNumber,i=e.isAuth,o=d(),l=Object(s.g)(),j=Object(s.h)(),m=r.a.useState(!1),p=Object(g.a)(m,2),f=(p[0],p[1],Object(be.a)({accept:"ingredients",collect:function(e){return{isHover:e.isOver()}},drop:function(e){var t;o({type:"bun"===(t=e).type?A:I,item:Object(h.a)(Object(h.a)({},t),{},{uuid:Object(pe.a)()})})}})),x=Object(g.a)(f,2),O=x[0].isHover,v=x[1],y=Object(c.useMemo)((function(){var e=t.reduce((function(e,t){return t.price+e}),0);return n&&(e+=2*n.price),e}),[t,n]);return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{ref:v,className:"".concat(w.a.constructor," mt-25"),children:[Object(b.jsxs)("ul",{className:"".concat(w.a.list),children:[Object(b.jsx)("li",{className:"".concat(w.a.item," ").concat(O?w.a.item_isHovering:""),children:n?Object(b.jsx)(_.ConstructorElement,{text:"".concat(n.name," (\u0432\u0435\u0440\u0445)"),price:n.price,thumbnail:n.image,type:"top",isLocked:!0}):Object(b.jsx)("div",{className:"".concat(w.a.nobun_top," text text_type_main-default"),children:Object(b.jsx)("p",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043e\u0447\u043a\u0443"})})}),Object(b.jsx)("li",{className:"".concat(w.a.item," ").concat(O?w.a.item_isHovering:""),children:Object(b.jsx)("ul",{className:"".concat(w.a.list_scroll," custom-scroll"),style:{display:"flex",flexDirection:"column",gap:"10px",alignItems:"flex-end"},children:t.map((function(e,t){return Object(c.createElement)(Oe,Object(h.a)(Object(h.a)({},e),{},{index:t,key:e.uuid}))}))})}),Object(b.jsx)("li",{className:"".concat(w.a.item," ").concat(O?w.a.item_isHovering:""),children:n?Object(b.jsx)(_.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(n.name," (\u043d\u0438\u0437)"),price:n.price,thumbnail:n.image}):Object(b.jsx)("div",{className:"".concat(w.a.nobun_bottom," text text_type_main-default"),children:Object(b.jsx)("p",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043e\u0447\u043a\u0443"})})})]}),(t||n)&&Object(b.jsxs)("div",{className:"".concat(w.a.order," mr-8"),children:[Object(b.jsxs)("div",{className:"".concat(w.a.total__price," mr-10"),children:[Object(b.jsx)("span",{className:"text text_type_digits-medium",children:y}),Object(b.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)(_.Button,{type:"primary",size:"large",onClick:function(){if(o({type:ue}),!n)return alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443");if(!i)return l.push("/login");var e=[].concat(Object(S.a)(t.map((function(e){return e._id}))),[n._id,n._id]);o(function(e){return H("token"),function(){var t=Object(U.a)(G.a.mark((function t(n){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:oe}),t.next=3,$(e).then((function(e){e&&e.success?n({type:le,payload:e.order.number}):n({type:de})})).catch((function(e){console.log(e),n({type:de}),n({type:_e})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),l.push({pathname:"/sendOrder",state:{background:j}}),a&&o({type:P})},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})})};function ge(){return Object(b.jsx)("div",{className:"container pl-5 pr-5",children:Object(b.jsxs)("div",{className:"main__container",children:[Object(b.jsx)(k,{}),Object(b.jsx)(he,{})]})})}var ve=n(28),ye=n(61),Ne=n.n(ye),Ee="GET_USER_REQUEST",Ce="GET_USER_SUCCESS",Te="GET_USER_FAILED",ke="GET_USER_INFO",Se="SET_IS_AUTH",Re="DELETE_IS_AUTH",we="CHANGE_USER_INFO",Ie="SET_WAS_ON_FORGOT_PAGE",De="DELETE_WAS_ON_FORGOT_PAGE";function Ae(){var e=Object(s.g)(),t=Object(s.h)(),n=d(),r=u((function(e){return e.userData})).isAuth,a=Object(c.useState)({email:"",password:""}),i=Object(g.a)(a,2),l=i[0],j=i[1],m=(t.state||{from:{pathname:"/"}}).from,p=function(e){j(Object(h.a)(Object(h.a)({},l),{},Object(ve.a)({},e.target.name,e.target.value)))};return r?Object(b.jsx)(s.a,{to:{pathname:"/"}}):Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:Ne.a.login__container,children:[Object(b.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(b.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),n(function(e,t,n){return function(c){c({type:Ee}),fetch("".concat(L,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})}).then((function(e){return Z(e)})).then((function(e){e&&e.success?(c({type:Ce,user:e.user}),c({type:Se,payload:{accessToken:e.accessToken,refreshToken:e.refreshToken}}),t.replace(n)):c({type:Te})})).catch((function(e){console.log(e),alert(e.message),c({type:Te})}))}}({email:l.email,password:l.password},e,m))},children:[Object(b.jsx)("div",{className:"form__item mb-6",children:Object(b.jsx)(_.Input,{placeholder:"E-mail",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u0430\u043a\u0430\u044f \u0442\u043e",name:"email",size:"default",type:"email",onChange:p,value:l.email})}),Object(b.jsx)("div",{className:"form__item mb-6",children:Object(b.jsx)(_.PasswordInput,{size:"default",name:"password",onChange:p,value:l.password})}),Object(b.jsx)("div",{className:"".concat(Ne.a.form__button," mb-20"),children:Object(b.jsx)(_.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(b.jsxs)("div",{className:Ne.a.login__links,children:[Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(b.jsx)(o.b,{to:"/register",className:"text text_color_accent",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(b.jsx)(o.b,{to:"/forgot-password",className:"text text_color_accent",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})})}var Fe=n(62),Pe=n.n(Fe);function Be(){var e=Object(s.g)(),t=d(),n=u((function(e){return e.userData})).isAuth,r=Object(c.useState)({email:"",password:"",name:""}),a=Object(g.a)(r,2),i=a[0],l=a[1],j=function(e){l(Object(h.a)(Object(h.a)({},i),{},Object(ve.a)({},e.target.name,e.target.value)))};return n?Object(b.jsx)(s.a,{to:{pathname:"/"}}):Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:Pe.a.login__container,children:[Object(b.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(b.jsxs)("form",{className:"form",action:"",onSubmit:function(n){n.preventDefault(),t(function(e,t){return function(n){n({type:Ee}),fetch("".concat(L,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,name:e.name})}).then((function(e){return Z(e)})).then((function(e){e&&e.success?(n({type:Ce,user:e.user}),n({type:Se,payload:{accessToken:e.accessToken,refreshToken:e.refreshToken}}),t.push({pathname:"/"})):n({type:Te})})).catch((function(e){console.log(e),alert(e.message),n({type:Te})}))}}(i,e))},children:[Object(b.jsx)("div",{className:"form__item mb-6",children:Object(b.jsx)(_.Input,{placeholder:"\u0418\u043c\u044f",error:!1,name:"name",onChange:j,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u0430\u043a\u0430\u044f \u0442\u043e",size:"default",type:"text",value:i.name})}),Object(b.jsx)("div",{className:"form__item mb-6",children:Object(b.jsx)(_.Input,{placeholder:"E-mail",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u0430\u043a\u0430\u044f \u0442\u043e",name:"email",size:"default",type:"email",onChange:j,value:i.email})}),Object(b.jsx)("div",{className:"form__item mb-6",children:Object(b.jsx)(_.PasswordInput,{size:"default",name:"password",onChange:j,value:i.password})}),Object(b.jsx)("div",{className:"".concat(Pe.a.form__button," mb-20"),children:Object(b.jsx)(_.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(b.jsx)("div",{className:Pe.a.login__links,children:Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(b.jsx)(o.b,{to:"/login",className:"text text_color_accent",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})}var Ge=n(85),Ue=n.n(Ge),Le=n(86),ze=n.n(Le),Me=function(){var e=Object(c.useRef)(null);return{ref:e,handleBlur:function(){var t=e.current;t&&(t.setAttribute("disabled","true"),t.classList.add("input__textfield-disabled"))},handleIconClick:function(){var t=e.current;t&&(t.removeAttribute("disabled"),t.classList.remove("input__textfield-disabled"),t.focus())}}};function qe(){var e=u((function(e){return e.userData})).user,t=d(),n=Object(c.useState)({name:"",email:"",password:""}),r=Object(g.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(!1),o=Object(g.a)(s,2),l=o[0],j=o[1];Object(c.useEffect)((function(){t(function(){var e=Object(U.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Ee}),e.next=3,X().then((function(e){e&&e.success?t({type:ke,user:e.user}):t({type:Te})})).catch((function(e){console.log(e),alert(e.message),t({type:Te})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),Object(c.useEffect)((function(){i(Object(h.a)(Object(h.a)({},a),{},{email:e.email,name:e.name}))}),[e]);var m=Me(),p=Me(),f=function(e){i(Object(h.a)(Object(h.a)({},a),{},Object(ve.a)({},e.target.name,e.target.value))),j(!0)};return Object(b.jsxs)("form",{className:"".concat(ze.a.form," mt-30"),onSubmit:function(e){e.preventDefault(),t(function(e){return function(){var t=Object(U.a)(G.a.mark((function t(n){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:Ee}),t.next=3,K(e).then((function(e){e&&e.success?n({type:we,payload:{user:e.user}}):n({type:Te})})).catch((function(e){console.log(e),alert(e.message),n({type:Te})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(a)),j(!1)},children:[Object(b.jsx)("div",{className:"form__item mb-6",children:Object(b.jsx)(_.Input,{placeholder:"\u0418\u043c\u044f",error:!1,name:"name",onChange:f,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u0430\u043a\u0430\u044f \u0442\u043e",size:"default",type:"text",icon:"EditIcon",onBlur:p.handleBlur,onIconClick:p.handleIconClick,disabled:!0,ref:p.ref,value:a.name})}),Object(b.jsx)("div",{className:"form__item mb-6",children:Object(b.jsx)(_.EmailInput,{onChange:f,value:a.email,name:"email"})}),Object(b.jsx)("div",{className:"form__item mb-6",children:Object(b.jsx)(_.Input,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",error:!1,name:"password",onChange:f,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u0430\u043a\u0430\u044f \u0442\u043e",size:"default",type:"password",icon:"EditIcon",onBlur:m.handleBlur,onIconClick:m.handleIconClick,disabled:!0,ref:m.ref,value:a.password})}),l&&Object(b.jsxs)("div",{className:"".concat(ze.a.form__buttons," mb-20"),children:[Object(b.jsx)(_.Button,{type:"secondary",size:"medium",onClick:function(t){t.preventDefault(),i({email:e.email,name:e.name,password:""}),j(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(b.jsx)(_.Button,{type:"primary",size:"medium",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})}var He=n(39),Je=n.n(He);function We(){var e=d(),t=Object(s.g)();return Object(b.jsxs)("div",{className:"".concat(Je.a.profile__cont," mt-30"),children:[Object(b.jsxs)("ul",{className:"".concat(Je.a.profile__menu," mr-15"),children:[Object(b.jsx)("li",{className:"".concat(Je.a.profile__menuItem," text text_type_main-medium text_color_inactive"),children:Object(b.jsx)(o.c,{to:"/profile",exact:!0,activeClassName:"text_color_primary",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(b.jsx)("li",{className:"".concat(Je.a.profile__menuItem," text text_type_main-medium text_color_inactive"),children:Object(b.jsx)(o.c,{to:"/profile/orders",activeClassName:"text_color_primary",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(b.jsx)("li",{onClick:function(){e(function(e){return function(t){t({type:Ee}),fetch("".concat(L,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){return Z(e)})).then((function(n){n&&n.success?(t({type:Re}),e.replace({pathname:"/login"})):t({type:Te})})).catch((function(e){console.log(e),alert(e.message),t({type:Te})}))}}(t))},className:"".concat(Je.a.profile__menuItem," text text_type_main-medium text_color_inactive"),children:Object(b.jsx)(o.c,{exact:!0,to:"/exit",activeClassName:"text_color_primary",children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(b.jsx)("p",{className:"".concat(Je.a.profile__menuSubtitle," mt-20 text text_type_main-default text_color_inactive"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})}var Qe=n(110),Ye=n.n(Qe),Ze=n(13),Ve=n.n(Ze),Ke=function(e){var t=Object(s.h)(),n=Object(s.j)().url,c=u((function(e){return e.burgerIngredients})).ingredients,r=e.data.number,a=Array.from(new Set(e.data.ingredients)).map((function(e){return c.find((function(t){return t._id===e}))})),i=a.reduce((function(e,t){return t&&("bun"===t.type?e+=2*t.price:e+=t.price),e}),0);return Object(b.jsxs)(o.b,{to:{pathname:"".concat(n,"/").concat(r),state:{background:t}},className:"".concat(Ve.a.feed," mt-4"),children:[Object(b.jsxs)("div",{className:"".concat(Ve.a.feed__top),children:[Object(b.jsxs)("p",{className:"text text_type_digits-default",children:["#",e.data.number]}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Q(e.data.createdAt)})]}),Object(b.jsx)("div",{className:"feed__center",children:Object(b.jsx)("h3",{className:"text text_type_digits-default mt-6 mb-6",children:e.data.name})}),Object(b.jsxs)("div",{className:"".concat(Ve.a.feed__bottom),children:[Object(b.jsxs)("div",{className:"".concat(Ve.a.ingredients),style:{position:"relative"},children:[a.slice(0,5).map((function(e,t){return Object(b.jsx)("img",{src:null===e||void 0===e?void 0:e.image_mobile,alt:"",className:"".concat(Ve.a.ingredient),style:{zIndex:5-t}},t)})),a.length>5&&Object(b.jsxs)("span",{className:"".concat(Ve.a.more," text text_type_main-default"),children:["+",a.length-5]})]}),Object(b.jsxs)("div",{className:"".concat(w.a.total__price," mr-10"),children:[Object(b.jsx)("span",{className:"text text_type_digits-medium",children:i}),Object(b.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})},Xe=function(){var e=u((function(e){return e.orderData})),t=e.orders,n=e.wsConnected,r=d();return Object(c.useEffect)((function(){var e,t=null===(e=H("token"))||void 0===e?void 0:e.replace("Bearer ","");return r(je("".concat(z,"?token=").concat(t))),function(){r(me())}}),[r]),Object(b.jsx)(b.Fragment,{children:t&&Object(b.jsxs)("div",{className:"".concat(Ye.a.profile__orders," mt-8 custom-scroll"),children:[n&&0===t.length&&Object(b.jsx)("h1",{children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432."}),n&&t.map((function(e,t){return Object(b.jsx)(Ke,{data:e},t)}))]})})};function $e(){var e=Object(s.j)().path,t=Object(s.g)(),n=Object(s.h)(),c="PUSH"===t.action&&n.state&&n.state.background;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"".concat(Ue.a.profile__container," pr-5 pl-5"),children:[Object(b.jsx)(We,{}),Object(b.jsx)("div",{className:"".concat(Ue.a.profile__content),children:Object(b.jsxs)(s.d,{location:c||n,children:[Object(b.jsx)(s.b,{path:"".concat(e,"/"),exact:!0,children:Object(b.jsx)(qe,{})}),Object(b.jsx)(s.b,{path:"".concat(e,"/orders"),exact:!0,children:Object(b.jsx)(Xe,{})})]})})]})})})}var et=n(63),tt=n.n(et);function nt(){var e=Object(s.g)(),t=u((function(e){return e.userData})),n=t.wasOnForgotPass,r=t.isAuth,a=d(),i=Object(c.useState)({password:"",token:""}),l=Object(g.a)(i,2),j=l[0],m=l[1],p=function(e){m(Object(h.a)(Object(h.a)({},j),{},Object(ve.a)({},e.target.name,e.target.value)))};return r?Object(b.jsx)(s.a,{to:{pathname:"/"}}):n?Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:tt.a.login__container,children:[Object(b.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsxs)("form",{className:"form",action:"",onSubmit:function(t){t.preventDefault(),a(function(e,t){return function(n){n({type:Ee}),fetch("".concat(L,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e.password,token:e.token})}).then((function(e){return Z(e)})).then((function(e){e&&e.success?t.push("/login"):n({type:Te})})).catch((function(e){console.log(e),alert(e.message),n({type:Te})}))}}(j,e)),a({type:De})},children:[Object(b.jsx)("div",{className:"form__item mb-6",children:Object(b.jsx)(_.Input,{type:"password",icon:"ShowIcon",size:"default",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u0430\u043a\u0430\u044f \u0442\u043e",name:"password",onChange:p,value:j.password})}),Object(b.jsx)("div",{className:"form__item mb-6",children:Object(b.jsx)(_.Input,{type:"text",size:"default",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u0430\u043a\u0430\u044f \u0442\u043e",name:"token",onChange:p,value:j.token})}),Object(b.jsx)("div",{className:"".concat(tt.a.form__button," mb-20"),children:Object(b.jsx)(_.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(b.jsx)("div",{className:tt.a.login__links,children:Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(b.jsx)(o.b,{to:"/login",className:"text text_color_accent",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})}):Object(b.jsx)(s.a,{to:"/forgot-password"})}var ct=n(64),rt=n.n(ct);function at(){var e=Object(s.g)(),t=d(),n=u((function(e){return e.userData})).isAuth,r=Object(c.useState)(""),a=Object(g.a)(r,2),i=a[0],l=a[1];return n?Object(b.jsx)(s.a,{to:{pathname:"/"}}):Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:rt.a.login__container,children:[Object(b.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsxs)("form",{className:"form",action:"",onSubmit:function(n){n.preventDefault(),t({type:Ie}),t(function(e,t){return function(n){n({type:Ee}),fetch("".concat(L,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){return Z(e)})).then((function(e){e&&e.success?t.push("/reset-password"):n({type:Te})})).catch((function(e){console.log(e),alert(e.message),n({type:Te})}))}}(i,e))},children:[Object(b.jsx)("div",{className:"form__item mb-6",children:Object(b.jsx)(_.Input,{placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 E-mail",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u0430\u043a\u0430\u044f \u0442\u043e",name:"email",size:"default",type:"email",value:i,onChange:function(e){l(e.target.value)}})}),Object(b.jsx)("div",{className:"".concat(rt.a.form__button," mb-20"),children:Object(b.jsx)(_.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(b.jsx)("div",{className:rt.a.login__links,children:Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(b.jsx)(o.b,{to:"/login",className:"text text_color_accent",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})}function it(){return Object(b.jsx)("p",{children:"\u041d\u0435 \u043d\u0430\u0448\u043b\u0438 \u043d\u0438\u0447\u0435\u0433\u043e\u0448\u0435\u043d\u044c\u043a\u0438. \u041f\u043e\u0442\u043e\u043c \u043f\u0440\u0438\u0434\u0435\u043b\u0430\u044e \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"})}var st=function(e){var t=e.children,n=e.exact,c=e.path,r=u((function(e){return e.userData})).isAuth;return Object(b.jsx)(s.b,{exact:n,path:c,render:function(e){var n=e.location;return r?t:Object(b.jsx)(s.a,{to:{pathname:"/login",state:{from:n}}})}})},ot="GET_ITEMS_REQUEST",lt="GET_ITEMS_SUCCESS",dt="GET_ITEMS_FAILED",ut="SET_INGREDIENT_TO_MODAL",_t="REMOVE_INGREDIENT_FROM_MODAL",jt=n(31),mt=n.n(jt),bt=function(){var e=Object(s.i)().id;console.log(e);var t=e,n=d(),r=u((function(e){return e.orderData})).orders,a=u((function(e){return e.burgerIngredients})).ingredients;Object(c.useEffect)((function(){var e;0===r.length&&n((e=t,function(t){t({type:ae}),fetch("".concat(L,"/orders/").concat(e)).then((function(e){if(e.ok)return e.json();throw new Error("Cannot get data from API. Status code: ".concat(e.status))})).then((function(e){e&&e.success?t({type:ie,orders:e.orders}):t({type:se})})).catch((function(e){console.log(e),t({type:se})}))}))}),[n]);var i=r&&r.find((function(e){return e.number===Number(t)})),o=Object(c.useMemo)((function(){return Array.from(new Set(null===i||void 0===i?void 0:i.ingredients)).map((function(e){return a.find((function(t){return t._id===e}))}))}),[i,a]),l=Object(c.useMemo)((function(){return o.reduce((function(e,t){return t&&("bun"===t.type?e+=2*t.price:e+=t.price),e}),0)}),[o]);return t?Object(b.jsxs)(b.Fragment,{children:[0===o.length&&Object(b.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),i&&o.length>0&&Object(b.jsxs)("div",{className:"".concat(mt.a.feed),children:[Object(b.jsxs)("p",{className:"text text_type_digits-default ".concat(mt.a.title),children:["#",null===i||void 0===i?void 0:i.number]}),Object(b.jsx)("p",{className:"text text_type_main-medium  mt-10",children:null===i||void 0===i?void 0:i.name}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_success mt-2",children:"done"===(null===i||void 0===i?void 0:i.status)?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-15 mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(b.jsx)("div",{className:"".concat(mt.a.ingredients," custom-scroll"),children:o&&o.map((function(e,t){return Object(b.jsxs)("div",{className:"".concat(mt.a.ingredient),children:[Object(b.jsxs)("div",{className:"".concat(mt.a.ingredient__info),children:[Object(b.jsx)("img",{src:null===e||void 0===e?void 0:e.image_mobile,alt:"",className:"".concat(mt.a.ingredient__image)}),Object(b.jsx)("p",{className:"text text_type_main-default ml-4",children:null===e||void 0===e?void 0:e.name})]}),Object(b.jsxs)("div",{className:"".concat(mt.a.ingredient__price),children:[Object(b.jsxs)("span",{className:"text text_type_digits-default mr-2",children:["bun"===(null===e||void 0===e?void 0:e.type)?2:1," x ",null===e||void 0===e?void 0:e.price]}),Object(b.jsx)(_.CurrencyIcon,{type:"primary"})]})]},t)}))}),Object(b.jsxs)("div",{className:"".concat(mt.a.feed__footer),children:[Object(b.jsx)("p",{className:"text text_type_main-default ml-4 text_color_inactive",children:Q(null===i||void 0===i?void 0:i.createdAt)}),Object(b.jsxs)("div",{className:"total__".concat(mt.a.ingredient__price),children:[Object(b.jsx)("span",{className:"text text_type_digits-default mr-2",children:l}),Object(b.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})]}):Object(b.jsx)("h1",{children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"})},pt=n(50),ft=n.n(pt),xt=n(111),Ot=n.n(xt),ht=function(e){return Object(b.jsx)("div",{className:Ot.a.overlay,onClick:e.onClose})},gt=function(e){var t=Object(s.g)(),n=function(e){"Escape"===e.code&&function(e){e.stopPropagation(),t.goBack()}(e)};return r.a.useEffect((function(){return document.addEventListener("keyup",n),function(){document.removeEventListener("keyup",n)}})),i.a.createPortal(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(ht,{onClose:e.onClose}),Object(b.jsxs)("div",{className:"".concat(ft.a.modal," pt-10 pr-10 pl-10 pb-15"),children:[Object(b.jsxs)("div",{className:ft.a.header,children:[Object(b.jsx)("h3",{className:"".concat(ft.a.title," text text_type_main-large"),children:e.title}),Object(b.jsx)("div",{className:ft.a.close_pointer,onClick:e.onClose,children:Object(b.jsx)(_.CloseIcon,{type:"primary"})})]}),e.children]})]}),document.getElementById("modal-root"))},vt=n(87),yt=n.n(vt),Nt=n.p+"static/media/graphics.95470a5b.png",Et=function(){var e=u((function(e){return e.orderData})).orderNumber,t=d();return Object(c.useEffect)((function(){e&&t({type:P})}),[e,t]),Object(b.jsxs)(b.Fragment,{children:[!e&&Object(b.jsx)("h1",{children:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),Object(b.jsxs)("div",{className:"".concat(yt.a.order," pb-15"),children:[Object(b.jsx)("h3",{className:"text text_primary_ligth text_type_digits-large",children:e}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-8",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)("div",{className:"".concat(yt.a.status," mt-15 mb-15"),children:Object(b.jsx)("img",{src:Nt,alt:"done"})}),Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-2",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]})},Ct=function(){var e=u((function(e){return e.orderData})),t=e.orders,n=e.total,r=e.totalToday,a=e.wsConnected,i=d();return Object(c.useEffect)((function(){return i(je("".concat(z,"/all"))),function(){i(me())}}),[i]),Object(b.jsxs)(b.Fragment,{children:[a&&t&&0===t.length&&Object(b.jsx)("h1",{style:{textAlign:"center"},children:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),n&&r&&0!==t.length?Object(b.jsx)("div",{className:"container pl-5 pr-5",children:Object(b.jsxs)("div",{className:"main__container",children:[Object(b.jsxs)("div",{className:Ve.a.feeds__container,children:[Object(b.jsx)("h1",{className:"text text_type_main-large mt-10 text_colo",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsx)("div",{className:"".concat(Ve.a.feeds," mt-5 custom-scroll"),children:t.map((function(e,t){return Object(b.jsx)(Ke,{data:e},t)}))})]}),Object(b.jsxs)("div",{className:"".concat(Ve.a.feed__info),children:[Object(b.jsxs)("div",{className:Ve.a.feed__board,children:[Object(b.jsxs)("div",{className:Ve.a.feed__boardLeft,children:[Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b"}),Object(b.jsx)("ul",{className:Ve.a.feed__completed,children:t.filter((function(e){return"done"===e.status})).slice(0,10).map((function(e,t){return Object(b.jsx)("li",{className:"text text_type_digits-default text_color_success mb-2",children:e.number},t)}))})]}),Object(b.jsxs)("div",{className:Ve.a.feed__boardRight,children:[Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(b.jsx)("ul",{className:Ve.a.feed__inProgress,children:t.filter((function(e){return"pending"===e.status})).slice(0,10).map((function(e,t){return Object(b.jsx)("li",{className:"text text_type_digits-default text_color_success mb-2",children:e.number},t)}))})]})]}),Object(b.jsxs)("div",{className:"feed__allCount mt-15",children:[Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(b.jsx)("p",{className:"text text_type_digits-large text_color_primary ".concat(Ve.a.feed__mainTitle),children:n})]}),Object(b.jsxs)("div",{className:"feed__todayCount mt-15",children:[Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(b.jsx)("p",{className:"text text_type_digits-large  text_color_primary ".concat(Ve.a.feed__mainTitle),children:r})]})]})]})}):null]})};var Tt,kt=function(){var e=Object(s.g)(),t=Object(s.h)(),n="PUSH"===e.action&&t.state&&t.state.background,r=d();return Object(c.useEffect)((function(){r((function(e){e({type:ot}),fetch(L+"/ingredients").then((function(e){if(e.ok)return e.json();throw new Error("Cannot get data from API. Status code: ".concat(e.status))})).then((function(t){t&&t.success?e({type:lt,ingredients:t.data}):e({type:dt})})).catch((function(t){console.log(t),e({type:dt})}))}))}),[r]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsxs)("main",{children:[Object(b.jsxs)(s.d,{location:n||t,children:[Object(b.jsx)(s.b,{path:"/",exact:!0,children:Object(b.jsx)(ge,{})}),Object(b.jsx)(s.b,{path:"/login",exact:!0,children:Object(b.jsx)(Ae,{})}),Object(b.jsx)(s.b,{path:"/register",exact:!0,children:Object(b.jsx)(Be,{})}),Object(b.jsx)(s.b,{path:"/forgot-password",exact:!0,children:Object(b.jsx)(at,{})}),Object(b.jsx)(s.b,{path:"/reset-password",exact:!0,children:Object(b.jsx)(nt,{})}),Object(b.jsx)(s.b,{path:"/ingredients/:id",exact:!0,children:Object(b.jsx)(O,{})}),Object(b.jsx)(st,{path:"/profile",exact:!0,children:Object(b.jsx)($e,{})}),Object(b.jsx)(st,{path:"/profile/orders/:id",exact:!0,children:Object(b.jsx)(bt,{})}),Object(b.jsx)(st,{path:"/profile",children:Object(b.jsx)($e,{})}),Object(b.jsx)(s.b,{path:"/feed",exact:!0,children:Object(b.jsx)(Ct,{})}),Object(b.jsx)(s.b,{path:"/feed/:id",exact:!0,children:Object(b.jsx)(bt,{})}),Object(b.jsx)(s.b,{children:Object(b.jsx)(it,{})})]}),n&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(s.b,{path:"/ingredients/:id",children:Object(b.jsx)(gt,{onClose:function(){return e.goBack()},children:Object(b.jsx)(O,{})})}),Object(b.jsx)(s.b,{path:"/sendOrder",children:Object(b.jsx)(gt,{onClose:function(){return e.goBack()},children:Object(b.jsx)(Et,{})})}),Object(b.jsx)(s.b,{path:"/feed/:id",children:Object(b.jsx)(gt,{onClose:function(){return e.goBack()},children:Object(b.jsx)(bt,{})})}),Object(b.jsx)(s.b,{path:"/profile/orders/:id",children:Object(b.jsx)(gt,{onClose:function(){return e.goBack()},children:Object(b.jsx)(bt,{})})})]})]})]})},St=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,212)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},Rt=n(206),wt=n(112),It=n(18),Dt={ingredients:[],ingredientsRequest:!1,ingredientsError:!1,ingredientDetails:{}},At={ingredients:[],bun:null,totalPrice:0},Ft={authRequest:!1,authFailed:!1,user:{name:"",email:""},isAuth:Boolean(H("token")),wasOnForgotPass:!1},Pt={wsConnected:!1,wsError:!1,orders:[],order:null,orderRequest:!1,orderFailed:!1,total:0,totalToday:0,orderNumber:null,orderNumberRequest:!1,orderNumberFailed:!1},Bt=Object(It.b)({burgerIngredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ot:return Object(h.a)(Object(h.a)({},e),{},{ingredientsRequest:!0});case lt:return Object(h.a)(Object(h.a)({},e),{},{ingredientsError:!1,ingredients:t.ingredients,ingredientsRequest:!1});case dt:return Object(h.a)(Object(h.a)({},e),{},{ingredientsError:!0,ingredientsRequest:!1});case ut:return Object(h.a)(Object(h.a)({},e),{},{ingredientDetails:t.item});case _t:return Object(h.a)(Object(h.a)({},e),{},{ingredientDetails:{}});default:return e}},burgerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(h.a)(Object(h.a)({},e),{},{ingredients:[].concat(Object(S.a)(e.ingredients),[t.item])});case A:return Object(h.a)(Object(h.a)({},e),{},{bun:t.item});case D:return Object(h.a)(Object(h.a)({},e),{},{ingredients:Object(S.a)(e.ingredients.filter((function(e){return e.uuid!==t.id})))});case F:var n=Object(S.a)(e.ingredients),c=n[t.dragIndex];return n.splice(t.dragIndex,1),n.splice(t.hoverIndex,0,c),Object(h.a)(Object(h.a)({},e),{},{ingredients:n});case P:return Object(h.a)(Object(h.a)({},e),{},{ingredients:[],bun:null});default:return e}},userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return Object(h.a)(Object(h.a)({},e),{},{authFailed:!0});case Ee:return Object(h.a)(Object(h.a)({},e),{},{authRequest:!0});case Ce:return Object(h.a)(Object(h.a)({},e),{},{user:t.user,authRequest:!1,authFailed:!1,isAuth:!0});case ke:return Object(h.a)(Object(h.a)({},e),{},{user:t.user});case Se:return J("token",t.payload.accessToken),localStorage.setItem("refreshToken",t.payload.refreshToken),Object(h.a)(Object(h.a)({},e),{},{isAuth:!0});case Re:return W("token"),localStorage.removeItem("refreshToken"),Object(h.a)(Object(h.a)({},e),{},{isAuth:!1});case Ie:return Object(h.a)(Object(h.a)({},e),{},{wasOnForgotPass:!0});case De:return Object(h.a)(Object(h.a)({},e),{},{wasOnForgotPass:!1});case we:return Object(h.a)(Object(h.a)({},e),{},{user:t.payload.user});default:return e}},orderData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(h.a)(Object(h.a)({},e),{},{wsConnected:!0});case te:return Object(h.a)(Object(h.a)({},e),{},{wsConnected:!1,wsError:!0});case ne:return Object(h.a)(Object(h.a)({},e),{},{wsConnected:!1,orders:[]});case ce:return Object(h.a)(Object(h.a)({},e),{},{orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});case se:return Object(h.a)(Object(h.a)({},e),{},{orderFailed:!0});case ae:return Object(h.a)(Object(h.a)({},e),{},{orderRequest:!0});case ie:return Object(h.a)(Object(h.a)({},e),{},{orders:t.orders});case oe:return Object(h.a)(Object(h.a)({},e),{},{orderNumberRequest:!0});case le:return console.log(t.payload),Object(h.a)(Object(h.a)({},e),{},{orderNumber:t.payload});case de:return Object(h.a)(Object(h.a)({},e),{},{orderNumberFailed:!0});case ue:return Object(h.a)(Object(h.a)({},e),{},{orderNumber:null});case _e:return Object(h.a)(Object(h.a)({},e),{},{order:null});default:return e}}}),Gt=n(114),Ut=["success"],Lt=n(113),zt=(Tt={wsInit:re,onOpen:ee,onClose:ne,onError:te,onMessage:ce},function(e){var t=null;return function(n){return function(c){var r=e.dispatch,a=c.type,i=c.payload,s=Tt.wsInit,o=Tt.onOpen,l=Tt.onClose,d=Tt.onError,u=Tt.onMessage;s.match(a)&&(t=new WebSocket(i)),t&&(t.onopen=function(e){r({type:o})},t.onerror=function(e){r({type:d})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t),c=(n.success,Object(Gt.a)(n,Ut));r({type:u,payload:c})},t.onclose=function(e){r({type:l})}),n(c)}}}),Mt=Object(Lt.a)({reducer:Bt,middleware:function(e){return e().concat(zt)}});i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(Rt.a,{backend:wt.a,children:Object(b.jsx)(l.a,{store:Mt,children:Object(b.jsx)(o.a,{children:Object(b.jsx)(kt,{})})})})}),document.getElementById("root")),St()},31:function(e,t,n){e.exports={body:"feed-details_body__2vcK4",composition:"feed-details_composition__wmYj_",feed:"feed-details_feed__191LH",title:"feed-details_title__2KLEu",ingredients:"feed-details_ingredients__334_8",ingredient:"feed-details_ingredient__3ZXJZ",ingredient__info:"feed-details_ingredient__info__1Gcsy",ingredient__image:"feed-details_ingredient__image__3DOvS",ingredient__price:"feed-details_ingredient__price__1E8mx",feed__footer:"feed-details_feed__footer__2sLxy"}},34:function(e,t,n){e.exports={flex:"ingredient-details_flex__3PI9R",container:"ingredient-details_container__1bWHY ingredient-details_flex__3PI9R",item:"ingredient-details_item__2COGk ingredient-details_flex__3PI9R",title:"ingredient-details_title__26n71"}},38:function(e,t,n){e.exports={constr:"burger-ingredients_constr__2sFZg",tabs:"burger-ingredients_tabs__SkJR8",tab:"burger-ingredients_tab__2iFGd",tab__link:"burger-ingredients_tab__link__qf-Sx",active:"burger-ingredients_active__JBaNI",products:"burger-ingredients_products__2H3tA",products__cont:"burger-ingredients_products__cont__34drP"}},39:function(e,t,n){e.exports={profile__menu:"profile-menu_profile__menu__13sjF",profile__menuItem:"profile-menu_profile__menuItem__3POU8",profile__cont:"profile-menu_profile__cont__3NHA9",profile__menuSubtitle:"profile-menu_profile__menuSubtitle__3l-21"}},49:function(e,t,n){e.exports={product:"ingredient_product__2F9Wl",image:"ingredient_image__3hSGQ",price:"ingredient_price__oFN7g",name:"ingredient_name__yRwAz"}},50:function(e,t,n){e.exports={modal:"modal_modal__3Rdvy",header:"modal_header__303v8",title:"modal_title__1BaYS",close_pointer:"modal_close_pointer__8ZJa2"}},61:function(e,t,n){e.exports={login__container:"login_login__container__6CvWc",form__button:"login_form__button__1ZpFT",login__links:"login_login__links__lwqqK"}},62:function(e,t,n){e.exports={login__container:"register_login__container__GFjq8",form__button:"register_form__button__1E203",login__links:"register_login__links__3P5vS"}},63:function(e,t,n){e.exports={login__container:"reset-password_login__container__12eW_",form__button:"reset-password_form__button__2TOBP",login__links:"reset-password_login__links__1Qu5H"}},64:function(e,t,n){e.exports={login__container:"forgot-password_login__container__2EMDg",form__button:"forgot-password_form__button__mgFng",login__links:"forgot-password_login__links__12wap"}},85:function(e,t,n){e.exports={profile__container:"profile_profile__container__Q9YLR",profile__content:"profile_profile__content__1BdwT"}},86:function(e,t,n){e.exports={form:"profile-form_form__1yvI5",input:"profile-form_input__38Yv7",form__buttons:"profile-form_form__buttons__z_qQY"}},87:function(e,t,n){e.exports={order:"order-details_order__3zDFj",status:"order-details_status__2qFHY"}}},[[198,1,2]]]);
//# sourceMappingURL=main.f8a609e0.chunk.js.map